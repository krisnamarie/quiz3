/*jshint strict:true node:true es5:true onevar:true laxcomma:true laxbreak:true eqeqeq:true immed:true latedef:true*/
(function () {
  "use strict";

  var Free = require('./')
    , fs = require('fs')
    , txt = fs.readFileSync('./free.output.txt', 'utf8')
    ;

  function test(obj) {
    ['total', 'used', 'free', 'shared', 'buffers', 'cached'].forEach(function (key) {
      if ('number' !== typeof obj[key]) {
        throw new Error(key + ' was not a number');
      }
    });
  }

  test(Free.parse(txt));
  Free.free(function (err, mstat) {
    if (err) {
      throw err;
    }

    test(mstat);
  });
}());
